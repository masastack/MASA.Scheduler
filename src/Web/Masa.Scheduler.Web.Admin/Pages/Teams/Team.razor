@inherits ProCompontentBase
@inject Masa.Stack.Components.Configs.GlobalConfig GlobalConfig
@page "/pages/team/{teamId}"

<MTabs @bind-Value="_curTab" SliderColor="transparent" class="pro-nav remover-ripple">
    <MTab class="text-capitalize pa-0" Value="0">
        <ChildContent>
            <span class="mtab-tab-line @(_curTab.ToInt32() >= 0 ?"mtab-tab-linear-primary":"mtab-tab-linear-neutral")"></span>
            <span class="rounded-circle mtab-tab-indicator @(_curTab.ToInt32() >= 0 ?"mtab-tab-indicator-primary":"mtab-tab-indicator-neutral")"></span>
            @if(_jobTabName.Length > 5)
            {
                <MTooltip Bottom>
                    <ActivatorContent>
                        <span class="mtab-tab-title" @attributes="@context.Attrs">@_jobTabName.Substring(0, 5)...</span>
                    </ActivatorContent>
                    <ChildContent>
                        <span>@_jobTabName</span>
                    </ChildContent>
                </MTooltip>
            }
            else
            {
                <span class="mtab-tab-title">@_jobTabName</span>
            }
        </ChildContent>
    </MTab>
    <MTab class="text-capitalize pa-0" Value="1" Disabled="@(_selectedJob == null)">
        <ChildContent>
            <span class="mtab-tab-line @(_curTab.ToInt32() >= 1 ?"mtab-tab-linear-primary":"mtab-tab-linear-neutral")"></span>
            <span class="rounded-circle mtab-tab-indicator @(_curTab.ToInt32() >= 1 ?"mtab-tab-indicator-primary":"mtab-tab-indicator-neutral")"></span>
            <span class="mtab-tab-title">@T("Task")</span>
        </ChildContent>
    </MTab>
</MTabs>

<MTabsItems Value="_curTab" Class="pt-2" Style="background-color:rgb(255 255 255 / 12%)">
    <MTabItem>
        <div class="d-flex">
            <Projects OnProjectChanged="OnProjectChangedAsync" TeamId="_teamId">
            </Projects>
            <div class="pl-6" style="width: calc(100% - 120px); overflow: hidden; display:block;">
                <SchedulerJobs Project="_project" OnJobSelect="HandleJobSelect" Visible="JobVisible">
                </SchedulerJobs>
            </div>
        </div>
    </MTabItem>
    <MTabItem>
        <SchedulerTasks SelectedJob="_selectedJob" Visible="TaskVisible">
        </SchedulerTasks>
    </MTabItem>
</MTabsItems>